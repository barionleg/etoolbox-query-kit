<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:granite="http://www.adobe.com/jcr/granite/1.0" xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="cq:Page">
    <jcr:content
            jcr:mixinTypes="[sling:VanityPath]"
            jcr:primaryType="nt:unstructured"
            jcr:title="Exadel Query Kit for AEM"
            sling:vanityPath="/etoolbox-query-kit"
            consoleId="cq-etoolbox-query-kit"
            sling:resourceType="granite/ui/components/shell/page">
        <head jcr:primaryType="nt:unstructured">
            <clientlibs
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/includeclientlibs"
                    categories="[cq.common.wcm,cq.listview.coral.columns.personalization,cq.siteadmin.admin.page.row,cq.gui.coral.common.admin.references,cq.screens.dcc,etoolbox-query-kit]"/>
        </head>
        <title
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/text"
                text="Exadel Query Kit"/>
        <actions jcr:primaryType="nt:unstructured">
            <primary jcr:primaryType="nt:unstructured">
                <new
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/pulldown"
                        text="New"
                        variant="primary">
                    <items jcr:primaryType="nt:unstructured">
                        <query
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                granite:id="newQueryButton"
                                text="Empty Query"
                                variant="actionBar"/>
                        <component
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                granite:class="new-option-dialog"
                                granite:id="componentsButton"
                                text="Pages containing component"
                                variant="actionBar"/>
                        <template
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                granite:class="new-option-dialog"
                                granite:id="templateButton"
                                text="Pages with template"
                                variant="actionBar"/>
                    </items>
                </new>
                <open
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/pulldown"
                        text="Open"
                        variant="primary">
                    <items jcr:primaryType="nt:unstructured">
                        <savedqueries
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                granite:id="openSavedQueriesButton"
                                text="Saved queries"
                                variant="actionBar"/>
                        <successfulqueries
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                granite:id="openLatestSuccessfulQueriesButton"
                                text="Latest successful queries"
                                variant="actionBar"/>
                    </items>
                </open>
                <settings
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/foundation/button"
                        granite:id="settingsButton"
                        variant="primary"
                        text="Settings"/>
            </primary>
            <secondary jcr:primaryType="nt:unstructured">
                <!--                <share-->
                <!--                        jcr:primaryType="nt:unstructured"-->
                <!--                        granite:id="shareButton"-->
                <!--                        sling:resourceType="granite/ui/components/coral/foundation/collection/action"-->
                <!--                        icon="fileShare"-->
                <!--                        text="Share"-->
                <!--                        variant="actionBar"/>-->
                <exportbuttongroup
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="etoolbox-query-kit/components/content/exportButtonGroup"/>
                <profile
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/foundation/form/select"
                        name="./profile">
                    <datasource
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="/services/etoolbox-query-kit/profiles"/>
                </profile>
            </secondary>
        </actions>
        <content
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/container"
                margin="{Boolean}true">
            <items jcr:primaryType="nt:unstructured">
                <columns
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns"
                        granite:class="content-columns"
                        margin="{Boolean}true">
                    <items jcr:primaryType="nt:unstructured">
                        <form
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/foundation/form"
                                granite:class="in-row"
                                granite:id="queryForm"
                                autocomplete="{Boolean}true"
                                method="get"
                                action="/services/etoolbox-query-kit/columns"
                                foundationForm="{Boolean}true">
                            <items jcr:primaryType="nt:unstructured">
                                <mode-container
                                        jcr:primaryType="nt:unstructured"
                                        sling:resourceType="granite/ui/components/coral/foundation/container"
                                        granite:class="buttons-query-editor">
                                    <items jcr:primaryType="nt:unstructured">
                                        <modes
                                                jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/coral/foundation/form/buttongroup"
                                                required="{Boolean}true"
                                                selectionMode="single">
                                            <items jcr:primaryType="nt:unstructured">
                                                <editor
                                                        jcr:primaryType="nt:unstructured"
                                                        text="Editor"
                                                        value="editor"/>
                                                <constructor
                                                        jcr:primaryType="nt:unstructured"
                                                        text="Constructor"
                                                        value="constructor"/>
                                            </items>
                                        </modes>
                                    </items>
                                </mode-container>
                                <query
                                        jcr:primaryType="nt:unstructured"
                                        sling:resourceType="granite/ui/components/coral/foundation/form/textarea"
                                        granite:class="codemirror-textarea"
                                        granite:id="queryTextArea"
                                        autocomplete="on"
                                        name="query"/>
                                <buttons
                                        jcr:primaryType="nt:unstructured"
                                        sling:resourceType="granite/ui/components/coral/foundation/container"
                                        granite:class="buttons-query-editor"
                                        margin="{Boolean}true">
                                    <items jcr:primaryType="nt:unstructured">
                                        <submit
                                                jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/foundation/button"
                                                granite:id="executeButton"
                                                variant="primary"
                                                text="Execute"/>
                                        <save
                                                jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/foundation/button"
                                                granite:id="saveButton"
                                                variant="secondary"
                                                text="Save"/>
                                    </items>
                                </buttons>
                            </items>
                        </form>
                    </items>
                </columns>
                <result
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns"
                        granite:class="content-columns"
                        margin="{Boolean}true">
                    <items jcr:primaryType="nt:unstructured">
                    <container
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/coral/foundation/container"
                            granite:class="in-row"
                            granite:id="resultColumn"
                            margin="{Boolean}true">
                    <items jcr:primaryType="nt:unstructured">
                        <result-table
                                granite:rel="granite-uptime-collection"
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/table"
                                granite:id="resultTable"
                                stateId="shell.collectionpage">
                            <granite:data
                                    jcr:primaryType="nt:unstructured"
                                    query="${param.query}"
                                    limit="${param.limit ? param.limit : 10}"
                                    offset="${param.offset ? param.offset : 0}"/>
                            <datasource
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="/services/etoolbox-query-kit/table"
                                    itemResourceType="/apps/etoolbox-query-kit/components/content/console/tableRow"/>
                            <columnsdatasource
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="/services/etoolbox-query-kit/columns"/>
                        </result-table>
                        <pagination
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="/apps/etoolbox-query-kit/components/content/pagination"/>
                    </items>
                    </container>
                    </items>
                </result>
                <savedqueriesmodal
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="etoolbox-query-kit/components/content/savedQueriesModal"/>
                <successfulqueriesmodal
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="etoolbox-query-kit/components/content/successfulQueriesModal"/>
                <componentdialog
                        jcr:primaryType="nt:unstructured"
                        jcr:title="Pages containing component"
                        sling:resourceType="granite/ui/components/coral/foundation/dialog"
                        granite:id="componentsDialog">
                    <items jcr:primaryType="nt:unstructured">
                        <form jcr:primaryType="nt:unstructured"
                              sling:resourceType="granite/ui/components/coral/foundation/form"
                              style="vertical">
                            <items jcr:primaryType="nt:unstructured">
                                <content jcr:primaryType="nt:unstructured"
                                         sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                                    <items jcr:primaryType="nt:unstructured">
                                        <column jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/coral/foundation/container">
                                            <items jcr:primaryType="nt:unstructured">
                                                <searchcontainer jcr:primaryType="nt:unstructured"
                                                                 sling:resourceType="granite/ui/components/coral/foundation/container"
                                                                 granite:id="searchContainer">
                                                    <items jcr:primaryType="nt:unstructured">
                                                    </items>
                                                </searchcontainer>
                                                <execute
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/button"
                                                        granite:id="executeComponentsButton"
                                                        text="Execute"
                                                        variant="primary"/>
                                                <editor
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/button"
                                                        granite:class="editorButton"
                                                        granite:id="editorComponentsButton"
                                                        text="To editor"
                                                        variant="secondary"/>
                                            </items>
                                        </column>
                                    </items>
                                </content>
                            </items>
                        </form>
                    </items>
                </componentdialog>
                <templatedialog
                        jcr:primaryType="nt:unstructured"
                        jcr:title="Pages with template"
                        sling:resourceType="granite/ui/components/coral/foundation/dialog"
                        granite:id="templateDialog">
                    <items jcr:primaryType="nt:unstructured">
                        <form jcr:primaryType="nt:unstructured"
                              sling:resourceType="granite/ui/components/coral/foundation/form"
                              style="vertical">
                            <items jcr:primaryType="nt:unstructured">
                                <content jcr:primaryType="nt:unstructured"
                                         sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                                    <items jcr:primaryType="nt:unstructured">
                                        <column jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/coral/foundation/container">
                                            <items jcr:primaryType="nt:unstructured">
                                                <template
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/select"
                                                        granite:id="templateSelect"
                                                        fieldLabel="Select template"/>
                                                <execute
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/button"
                                                        granite:id="executeTemplateButton"
                                                        text="Execute"
                                                        variant="primary"/>
                                                <editor
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/button"
                                                        granite:class="editorButton"
                                                        granite:id="editorTemplateButton"
                                                        text="To editor"
                                                        variant="secondary"/>
                                            </items>
                                        </column>
                                    </items>
                                </content>
                            </items>
                        </form>
                    </items>
                </templatedialog>
                <settingsdialog
                        jcr:primaryType="nt:unstructured"
                        jcr:title="Settings"
                        sling:resourceType="granite/ui/components/coral/foundation/dialog"
                        granite:id="settingsDialog">
                    <items jcr:primaryType="nt:unstructured">
                        <form jcr:primaryType="nt:unstructured"
                              sling:resourceType="granite/ui/components/coral/foundation/form"
                              style="vertical">
                            <items jcr:primaryType="nt:unstructured">
                                <content jcr:primaryType="nt:unstructured"
                                         jcr:title="Package setup"
                                         sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                                    <items jcr:primaryType="nt:unstructured">
                                        <column jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/coral/foundation/container">
                                            <items jcr:primaryType="nt:unstructured">
                                                <components
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType = "granite/ui/components/coral/foundation/form/multifield"
                                                        granite:class="settings-multifield"
                                                        granite:id="componentField"
                                                        fieldLabel="Components folders">
                                                    <field
                                                            jcr:primaryType="nt:unstructured"
                                                            sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                                            fieldLabel="Components folder"
                                                            name="componentFolder"
                                                            required="{Boolean}true"
                                                            emptyText="/apps"
                                                            rootPath="/apps"/>
                                                </components>
                                                <templates
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType = "granite/ui/components/coral/foundation/form/multifield"
                                                        granite:class="settings-multifield"
                                                        granite:id="templateField"
                                                        fieldLabel="Templates folders">
                                                    <field
                                                            jcr:primaryType="nt:unstructured"
                                                            sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                                            fieldLabel="Templates folder"
                                                            name="templateFolder"
                                                            required="{Boolean}true"
                                                            emptyText="/conf"
                                                            rootPath="/conf"/>
                                                </templates>
                                                <content
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType = "granite/ui/components/coral/foundation/form/multifield"
                                                        granite:class="settings-multifield"
                                                        granite:id="contentField"
                                                        fieldLabel="Content root">
                                                    <field
                                                            jcr:primaryType="nt:unstructured"
                                                            sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                                            fieldLabel="Content root"
                                                            name="contentFolder"
                                                            required="{Boolean}true"
                                                            emptyText="/content"
                                                            rootPath="/content"/>
                                                </content>
                                                <resultnumber
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/numberfield"
                                                        granite:id="resultNumberField"
                                                        fieldLabel="Max result number per page"
                                                        value="10"
                                                        max="100000"
                                                        min="1"
                                                        name="resultNumber"
                                                        step="1" />
                                                <save
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/button"
                                                        granite:id="saveSettingsButton"
                                                        text="Save"
                                                        variant="primary"/>
                                            </items>
                                        </column>
                                    </items>
                                </content>
                            </items>
                        </form>
                    </items>
                </settingsdialog>
                <edit-table-cell-dialog
                        jcr:primaryType="nt:unstructured"
                        jcr:title="Edit cell"
                        sling:resourceType="granite/ui/components/coral/foundation/dialog"
                        granite:id="editCellDialog">
                    <items jcr:primaryType="nt:unstructured">
                        <form
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/form"
                                granite:id="editCellDialogForm"
                                action=""
                                method="post"
                                style="vertical">
                            <items jcr:primaryType="nt:unstructured">
                                <content jcr:primaryType="nt:unstructured"
                                         sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                                    <items jcr:primaryType="nt:unstructured">
                                        <container jcr:primaryType="nt:unstructured"
                                                   sling:resourceType="granite/ui/components/coral/foundation/container"
                                                   granite:id="editRowDialogContainer">
                                            <datasource
                                                    jcr:primaryType="nt:unstructured"
                                                    sling:resourceType="/services/etoolbox-query-kit/edit-cell"/>
                                        </container>
                                    </items>
                                </content>
                            </items>
                        </form>
                    </items>
                    <footer jcr:primaryType="nt:unstructured">
                        <close
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType = "granite/ui/components/coral/foundation/button"
                                granite:class="edit-table-cells-buttons"
                                text = "Cancel">
                            <parentConfig
                                    jcr:primaryType="nt:unstructured"
                                    close="{Boolean}true"/>
                        </close>
                        <submit
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType = "granite/ui/components/coral/foundation/button"
                                granite:class="edit-table-cells-buttons"
                                type="submit"
                                text="Save"
                                formId="editRowDialogForm">
                            <parentConfig
                                    jcr:primaryType="nt:unstructured"
                                    close="{Boolean}true"/>
                        </submit>
                    </footer>
                </edit-table-cell-dialog>
            </items>
        </content>
    </jcr:content>
</jcr:root>